<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="./js/auth.js"></script>
    <base target="_top" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Patient data</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      #overlay {
        position: fixed; /* Stay in place */
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Black with transparency */
        z-index: 1000; /* Sit on top */
        display: none; /* Hidden by default */
        font-size: 3em;
      }
    </style>
  </head>

  <body>
    <div id="overlay" class="align-items-center">
      <div
        class="bg-secondary text-white mx-5 my-5 px-5 py-5 text-center align-items-center"
      >
        <b>Loading data ..................</b>
      </div>
    </div>
    <div class="container">
      <h1 class="mb-4">View Data from MIS</h1>
      <form id="misForm">
        <div class="row">
          <div class="col-5 form-group my-2 py-2">
            <label>Data entry date (Start):</label>
            <input
              type="date"
              class="form-control"
              name="sdate"
              id="sdate"
              value="2024-01-01"
              required
            />
          </div>
          <div class="col-5 form-group my-2 py-2">
            <label>Data entry date (End):</label>
            <input
              type="date"
              class="form-control"
              name="edate"
              id="edate"
              value="2024-02-07"
              required
            />
          </div>
          <div class="col-2 form-group my-2 py-2">
            <label>Click to get data</label>
            <button
              type="button"
              class="btn btn-primary form-control"
              onclick="callFromPatientList('execute');"
            >
              Get Data
            </button>
          </div>
        </div>
      </form>
      <hr />
      <div id="data"></div>
      <div id="ptData-head">
        <div
          class="row border rounded bg-secondary text-white px-2 py-2 mx-1 my-1 align-items-center text-center"
        >
          <div class="col" style="max-width: 4%"><strong>No.</strong></div>
          <div class="col-1"><strong>Date</strong></div>
          <div class="col-2"><strong>Name</strong></div>
          <div class="col" style="max-width: 4%"><strong>Age</strong></div>
          <div class="col-2"><strong>Address</strong></div>
          <div class="col-1"><strong>Population Type</strong></div>
          <div class="col-1"><strong>Sex</strong></div>
          <div class="col-1"><strong>Pregnancy status</strong></div>
          <div class="col-1"><strong>Test result</strong></div>
          <div class="col-1"><strong>Health education</strong></div>
          <div class="col-1"><strong>URL</strong></div>
        </div>
      </div>
      <div id="ptData"></div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
  <script>
    function callFromPatientList(functionName) {
      import("./js/patientList.js")
        .then((module) => {
          if (module[functionName]) {
            module[functionName]();
          } else {
            console.error(`Function ${functionName} not found in module`);
          }
        })
        .catch((error) => {
          console.error("Error importing module:", error);
        });
    }
  </script>
</html>
